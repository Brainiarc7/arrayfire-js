"use strict";
"use strict";
var Bluebird = require("bluebird");
function Ext(self) {
  self.types = {
    dtype: require("./dtype"),
    source: require("./source")
  };
  self.getDevices = function() {
    var current = self.getDevice();
    try {
      var count = self.getDeviceCount();
      var result = [];
      for (var i = 0; i < count; i++) {
        self.setDevice(i);
        result.push(self.getDeviceInfo());
      }
      return result;
    } finally {
      self.setDevice(current);
    }
  };
  self.async = Bluebird.coroutine;
}
module.exports = Ext;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLFdBQVcsQ0FBQztBQUVaLEFBQUksRUFBQSxDQUFBLFFBQU8sRUFBSSxDQUFBLE9BQU0sQUFBQyxDQUFDLFVBQVMsQ0FBQyxDQUFDO0FBRWxDLE9BQVMsSUFBRSxDQUFFLElBQUcsQ0FBRztBQUNmLEtBQUcsTUFBTSxFQUFJO0FBQ1QsUUFBSSxDQUFHLENBQUEsT0FBTSxBQUFDLENBQUMsU0FBUSxDQUFDO0FBQ3hCLFNBQUssQ0FBRyxDQUFBLE9BQU0sQUFBQyxDQUFDLFVBQVMsQ0FBQztBQUFBLEVBQzlCLENBQUM7QUFFRCxLQUFHLFdBQVcsRUFBSSxVQUFTLEFBQUQsQ0FBRztBQUN6QixBQUFJLE1BQUEsQ0FBQSxPQUFNLEVBQUksQ0FBQSxJQUFHLFVBQVUsQUFBQyxFQUFDLENBQUM7QUFDOUIsTUFBSTtBQUNBLEFBQUksUUFBQSxDQUFBLEtBQUksRUFBSSxDQUFBLElBQUcsZUFBZSxBQUFDLEVBQUMsQ0FBQztBQUNqQyxBQUFJLFFBQUEsQ0FBQSxNQUFLLEVBQUksR0FBQyxDQUFDO0FBQ2YsaUJBQWEsRUFBQSxDQUFHLENBQUEsQ0FBQSxFQUFJLE1BQUksQ0FBRyxDQUFBLENBQUEsRUFBRSxDQUFHO0FBQzVCLFdBQUcsVUFBVSxBQUFDLENBQUMsQ0FBQSxDQUFDLENBQUM7QUFDakIsYUFBSyxLQUFLLEFBQUMsQ0FBQyxJQUFHLGNBQWMsQUFBQyxFQUFDLENBQUMsQ0FBQztNQUNyQztBQUFBLEFBQ0EsV0FBTyxPQUFLLENBQUM7SUFDakIsQ0FDQSxPQUFRO0FBQ0osU0FBRyxVQUFVLEFBQUMsQ0FBQyxPQUFNLENBQUMsQ0FBQztJQUMzQjtBQUFBLEVBQ0osQ0FBQztBQUVELEtBQUcsTUFBTSxFQUFJLENBQUEsUUFBTyxVQUFVLENBQUM7QUFDbkM7QUFBQSxBQUVBLEtBQUssUUFBUSxFQUFJLElBQUUsQ0FBQztBQUFBIiwiZmlsZSI6ImV4dC5qcyIsInNvdXJjZVJvb3QiOiJsaWIvZXM2Iiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmxldCBCbHVlYmlyZCA9IHJlcXVpcmUoXCJibHVlYmlyZFwiKTtcblxuZnVuY3Rpb24gRXh0KHNlbGYpIHtcbiAgICBzZWxmLnR5cGVzID0ge1xuICAgICAgICBkdHlwZTogcmVxdWlyZShcIi4vZHR5cGVcIiksXG4gICAgICAgIHNvdXJjZTogcmVxdWlyZShcIi4vc291cmNlXCIpXG4gICAgfTtcblxuICAgIHNlbGYuZ2V0RGV2aWNlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgY3VycmVudCA9IHNlbGYuZ2V0RGV2aWNlKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgY291bnQgPSBzZWxmLmdldERldmljZUNvdW50KCk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNldERldmljZShpKTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChzZWxmLmdldERldmljZUluZm8oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgc2VsZi5zZXREZXZpY2UoY3VycmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgc2VsZi5hc3luYyA9IEJsdWViaXJkLmNvcm91dGluZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBFeHQ7Il19
